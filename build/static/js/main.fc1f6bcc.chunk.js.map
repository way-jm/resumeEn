{"version":3,"sources":["../ /^/styles.*/.css$","components/style-text/styles0.css","components/style-text/styles1.css","components/style-text/styles2.css","components/work-text/work.txt","utils/util.ts","components/style-text/style-text.tsx","components/work-text/work-style.tsx","App.tsx","index.tsx"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","openComment","commentRegex","keyRegex","valueRegex","selectorRegex","pxRegex","pxRegex2","handleChar","fullText","char","slice","replace","test","endOfSentence","comma","endOfBlock","StyleText","props","useReducer","state","text","setText","innerRef","styleBuffer","elRef","useRef","styleText","i","require","writeTo","el","message","index","interval","charsPerInterval","a","animationSkipped","chars","scrollTop","scrollHeight","writeChar","length","thisInterval","thisSlice","Promise","delay","paused","styleAppend","useImperativeHandle","write","current","writeToEnd","txt","join","styleHTML","styleOverwrite","contentEditable","dangerouslySetInnerHTML","__html","ref","toHTML","Markdown","markdown","WorkStyle","workRef","el2Ref","writeSimpleChar","workText","mdText","useState","flipped","setFlipped","show","setShow","preview","setPreview","showWorkBox","setTimeout","flipping","wheel","dx","dy","half","clientHeight","className","App","styleRef","styleTagEl","document","getElementById","startAnimation","surprisinglyShortAttentionSpan","useEffect","then","textContent","ReactDOM","render"],"mappings":"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","file":"static/js/main.fc1f6bcc.chunk.js","sourcesContent":["var map = {\n\t\"./styles0.css\": 22,\n\t\"./styles1.css\": 23,\n\t\"./styles2.css\": 24\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 21;","module.exports = \"/**\\n *\\n * Hi, I'm Way。\\n *\\n * I like to tinker with interesting things.\\n *\\n * Living Coding？\\n */\\n\\n/**\\n * let's get started. First, let's get everything moving~\\n */\\n\\n* {\\n  -webkit-transition: all 1s;\\n}\\n\\n/**\\n * It seems like you are saying that something may seem useless at first, but not to worry because the effect will be seen soon.\\n *\\n * Black and white color scheme is too boring and I want to make some changes.\\n */\\n\\nhtml {\\n  background: rgb(63, 82, 99);\\n}\\n\\n/***\\n * Wait...\\n */\\n\\npre, a {\\n  color: white;\\n  box-sizing: border-box;\\n\\n}\\n\\n/**\\n * It looks much better now, but it's a bit too bright and flashy.\\n *\\n * In addition, using the entire screen to write code is a bit wasteful in terms of space\\n *\\n * Don't worry, let me do some optimization.\\n */\\n\\npre:not(:empty) {\\n  overflow: auto;\\n  background: rgb(48, 48, 48);\\n  border: 1px solid #ccc;\\n  max-height: 44.6%;\\n  width: 49%;\\n  font-size: 14px;\\n  font-family: monospace;\\n  padding: 10px 10px 20px;\\n  box-shadow: -4px 4px 2px 0 rgba(0,0,0,0.3);\\n  white-space: pre-wrap;\\n  outline: 0;\\n  position: absolute;\\n}\\n\\n/**\\n * Next, we'll move it to the right side of the screen.\\n */\\n\\n#style-text {\\n  -webkit-transform: translateX(95%);\\n  position: absolute;\\n}\\n\\n/**\\n * It looks good, but all the font colors are white!\\n *\\n * So, let's make the code more readable~\\n */\\n\\n.comment       { color: #857F6B; font-style: italic; }\\n.selector      { color: #E69F0F; }\\n.selector .key { color: #64D5EA; }\\n.key           { color: #64D5EA; }\\n.value         { color: #BE84F2; }\\n.value.px      { color: #F92772; }\\n\\n/**\\n * Now we have made some progress.\\n *\\n * Let's make it more three-dimensional and full.\\n */\\n\\nbody {\\n  -webkit-perspective: 1000px;\\n}\\n\\n#style-text {\\n  -webkit-transform: translateX(98.5%) rotateY(-10deg);\\n  -webkit-transform-origin: right;\\n  max-height: 94.5%;\\n}\\n\\n/**\\n * Okay, that's about it. Next, let's talk about myself。\\n *\\n * I believe you probably didn't come here to see my flashy skills？\\n */\\n\\npre:not(#style-text) {\\n  -webkit-transform: rotateY(10deg);\\n  -webkit-transform-origin: left;\\n}\\n/**/\\n\\n\"","module.exports = \"/**\\n * The markdown on the left side doesn't look very aesthetic。\\n *\\n * Let's make some modifications.\\n */\\n#work-text {\\n  max-height: 94.5%;\\n}\\n\\n#work-text.flipped {\\n  -webkit-transform: rotateX(0deg) rotateY(190deg) rotateZ(180deg);\\n}\\n\\n#work-text .md {\\n  -webkit-transform: rotateY(190deg) rotateZ(180deg);\\n  margin-top: 1200px;\\n}\\n\\n/**\\n * This is the moment of witnessing a miracle：\\n *\\n * 3。\\n * 2。\\n * 1。\\n *\\n * 。\\n * I'm just joking, there's nothing there~\\n *\\n * Okay, actually there is, it's here\\n *\\n */\\n\"","module.exports = \"\\n/**\\n * The text can be adjusted appropriately.\\n */\\n\\n.md {\\n  font-family: \\\"Helvetica Neue\\\", Helvetica, sans-serif;\\n}\\n\\n.md h1, .md h2, .md h3, .md h4, .md h5, .md h6 {\\n  display: inline-block;\\n  color: #ddd;\\n  border-bottom: 1px solid #ccc;\\n  padding-bottom: 5px;\\n}\\n\\n.md li {\\n  margin: 5px 0;\\n  line-height: 1.5;\\n}\\n\\n.md h1, .md h2, .md h3, .md h4, .md h5, .md h6, .md ul, .md p {\\n  margin: 0;\\n}\\n\\n\\n/**\\n * It's just about the last bit to finish.\\n */\\n\\npre:hover{\\n  box-shadow: 0 0 40px 5px rgba(255,255,255,0.4);\\n}\\n\\n/**\\n * Wish you like it ，this idea was inspired by a foreign genius，\\n * \\\"I found the idea very interesting, and also used React, Hooks, and TypeScript to refactor it\\n * If think it not bad，can contact with me~，ღ( ´･ᴗ･` )\\n */\\n\\n\\n\"","module.exports = \"\\nBase Information\\n=========\\n\\n* Name：Wei Zhengming 。\\n* Email： 1904628089@qq.com 。\\n* GitHub：https://github.com/way-jm 。\\n* PHONE: 18221924339\\n* BD： 1992.06.27\\n\\nPersonal information\\n-------\\n\\n* A well-behaved front-end developer, unreliable Noder & Pythoner, and deep learning enthusiast.\\n* A helpful open-source developer (xr-storage, Want, wayswipe).\\n* Rich front-end work experience and some back-end (Base PHP & Node) development experience.\\n* Familiar with MVVM frameworks such as Vue and React, including experience with Vuex, Redux, Hooks, and development based on Umi and ant design.\\n* Rich experience using TypeScript, Node, and Koa2 for back-end development.\\n* Experience with Serverless and AWS Lambda.\\n* Experience constructing a micro front-end framework and using and modifying open-source micro front-end frameworks qiankun and wujie for old projects.\\n* Excellent CSS skills, familiar with sass, less, stylus.\\n* WebVR development experience.\\n* Native WeChat mini program & mini program cloud development & mini program cloud hosting\\n* Familiar with webpack configuration and various loaders and plugins.\\n* Strong learning ability.\\n* N1 Level in the Japanese Language Proficiency Test.\\n\\n\\nEducation\\n-------\\n* 2010.9-2014.6 Central South University of Forestry and Technology\\n\\nExperience\\n------\\n* 2022.4 -Now Human longevity Inc\\n   -Responsible for the development and maintenance of the AI medical platform Terminal, as well as the upgrading and microfrontend migration.\\n   -Involved in the development and maintenance of new features for the client app.\\n   -Involved in the development and maintenance of the Node BFF (AWS Lambda) middleware.\\n   -Some management job for Frontend team.\\n   -Cooperate development with US team.\\n* 2021.8~2022.4  XIAOMI Corporation Nanjing R&D Center\\n   -Responsible for the development and maintenance of the YOUPIN e-commerce component library- Dalaran UI.\\n   -Involved in the business development of the YOUPIN e-commerce platform and merchant workstation\\n   -Upgrade the front-end project scaffold.\\n\\n* 2019.5—2021.7  AnHui QIANMO Network Tech Co., Ltd\\n  -Development of the display system and back-end system for the Anhui environment protect project, including video surveillance, map integration, and big data visualization.\\n  -Web GIS development.\\n  -Development and application of video surveillance streaming media and WebRTC\\n  -Technical Stack：React、Redux、Umi、Typescript，Antd etc.\\n\\n* 2016.8-2019.5 Shanghai Houbu network tech Co., Ltd\\n  -Development of the H5 portion of the 'Lai Zhuan' Hybird App and PC development of the management.\\n  -Lead the upgrading and transformation of the company's original project from JQuery to Vue2.\\n  -Development of server-side with PHP .\\n\\n* 2014.6-2016.8 FUCHIMOTO Heavy Industry Co., Ltd Japanese translation work for internal company。\\n\\n\"","let openComment = false;\nconst commentRegex = /(\\/\\*(?:[^](?!\\/\\*))*\\*)$/;\nconst keyRegex = /([a-zA-Z- ^\\n]*)$/;\nconst valueRegex = /([^:]*)$/;\nconst selectorRegex = /(.*)$/;\nconst pxRegex = /\\dp/;\nconst pxRegex2 = /p$/;\nconst speed = 16;\n\nconst handleChar = (fullText: string, char: string) => {\n    if (openComment && char !== '/') {\n        fullText += char;\n    } else if (char === '/' && !openComment) {\n        openComment = true;\n        fullText += char;\n    } else if (char === '/' && fullText.slice(-1) === '*' && openComment) {\n        openComment = false;\n        fullText = fullText.replace(commentRegex, '<span class=\"comment\">$1/</span>');\n    } else if (char === ':') {\n        fullText = fullText.replace(keyRegex, '<span class=\"key\">$1</span>:');\n    } else if (char === '') {\n        fullText = fullText.replace(valueRegex, '<span class=\"value\">$1</span>');\n    } else if (char === '{') {\n        fullText = fullText.replace(selectorRegex, '<span class=\"selector\">$1</span>{');\n    } else if (char === 'x' && pxRegex.test(fullText.slice(-2))) {\n        fullText = fullText.replace(pxRegex2, '<span class=\"value px\">px</span>');\n    } else {\n        fullText += char;\n    }\n    return fullText;\n};\n\nexport {handleChar,speed};\n","import React, {useRef, useImperativeHandle,useReducer} from 'react';\nimport {handleChar} from \"../../utils/util\";\nimport Promise from 'bluebird';\nimport {speed} from \"../../utils/util\";\n\ninterface propsInterface {\n    animationSkipped: boolean,\n    paused: boolean,\n    styleOverwrite?: any,\n    styleAppend?: any\n    innerRef?: any\n}\n\nconst endOfSentence = /[？！。~：]$/;\nconst comma = /\\D[，；、]$/;\nconst endOfBlock = /[^/]\\n\\n$/;\n\nconst StyleText: React.FC<propsInterface> = (props) => {\n    function setT(state:any,char:string) {\n        return handleChar(state,char)\n    }\n    const [text, setText] = useReducer(setT, '');\n    const {innerRef} = props;\n    // 这里需要使用强制同步数据流传递给父组件，useState，useReducer都不满足要求\n    let styleBuffer='';\n\n    const elRef = useRef(null);\n    const styleText = [0, 1, 2].map(i => {\n\n\n        return require('!!raw-loader!./styles' + i + '.css');\n    });\n    const writeTo: any = async (el: Element, message: string, index: number, interval: number, charsPerInterval: number) => {\n        if (props.animationSkipped) {\n            throw new Error('SKIP IT');\n        }\n        let chars = message.slice(index, index + charsPerInterval);\n        index += charsPerInterval;\n\n        el.scrollTop = el.scrollHeight;\n\n        writeChar(chars);\n\n        if (index < message.length) {\n            let thisInterval = interval;\n            let thisSlice = message.slice(index - 2, index);\n            if (comma.test(thisSlice)) {\n                thisInterval = interval * 30;\n            }\n            if (endOfSentence.test(thisSlice)) {\n                thisInterval = interval * 70;\n            }\n            thisSlice = message.slice(index - 2, index + 1);\n            if (endOfBlock.test(thisSlice)) {\n                thisInterval = interval * 50;\n            }\n\n            do {\n                await Promise.delay(thisInterval);\n            } while (props.paused);\n            return writeTo(el, message, index, interval, charsPerInterval);\n        }\n    };\n    const writeChar = (char: string) => {\n        setText(char);\n        styleBuffer=styleBuffer + char;\n        if (char === ';'||char==='}') {\n            props.styleAppend(styleBuffer);\n            styleBuffer='';\n        }\n    };\n    useImperativeHandle(innerRef, () => ({\n        write: async (index: number) => {\n            await writeTo(elRef.current, styleText[index], 0, speed, 1);\n        },\n        writeToEnd: () => {\n            let txt = styleText.join('\\n');\n            let styleHTML = '';\n            for (let i = 0; i < txt.length; i++) {\n                styleHTML = handleChar(styleHTML, txt[i]);\n            }\n            setText(styleHTML);\n            props.styleOverwrite('#work-text * {transition: none; }' + txt);\n        }\n    }));\n    return <pre id='style-text' contentEditable dangerouslySetInnerHTML={{__html: text}} ref={elRef}/>;\n};\n\nexport default StyleText;\n","import React, {useImperativeHandle, useReducer, useState, useRef} from 'react';\nimport Promise from 'bluebird';\nimport {handleChar} from \"../../utils/util\";\nimport wheel from 'mouse-wheel';\nimport Markdown from 'markdown';\n\nimport {speed} from \"../../utils/util\";\n\n\nconst toHTML = Markdown.markdown.toHTML;\n\ninterface propsInterface {\n    paused: boolean,\n    workRef?: any\n}\n\nconst endOfSentence = /[？！。~：]$/;\nconst comma = /\\D[，；、]$/;\nconst endOfBlock = /[^/]\\n\\n$/;\nconst WorkStyle: React.FC<propsInterface> = (props) => {\n    const {workRef} = props;\n\n\n    function setT(state: any, char: string) {\n        return handleChar(state, char);\n    }\n\n    const el2Ref: React.MutableRefObject<any> = useRef<HTMLElement>(null);\n\n    const writeTo: any = async (el: Element, message: string, index: number, interval: number, charsPerInterval: number) => {\n        let chars = message.slice(index, index + charsPerInterval);\n        index += charsPerInterval;\n\n        el.scrollTop = el.scrollHeight;\n        writeSimpleChar(chars);\n\n        if (index < message.length) {\n            let thisInterval = interval;\n            let thisSlice = message.slice(index - 2, index);\n            if (comma.test(thisSlice)) {\n                thisInterval = interval * 30;\n            }\n            if (endOfSentence.test(thisSlice)) {\n                thisInterval = interval * 70;\n            }\n            thisSlice = message.slice(index - 2, index + 1);\n            if (endOfBlock.test(thisSlice)) {\n                thisInterval = interval * 50;\n            }\n\n            do {\n                await Promise.delay(thisInterval);\n            } while (props.paused);\n            return writeTo(el, message, index, interval, charsPerInterval);\n        }\n    };\n    const writeSimpleChar = (char: string) => {\n        setText(char);\n    };\n\n    const [text, setText] = useReducer(setT, '');\n    // eslint-disable-next-line import/no-webpack-loader-syntax\n    const workText = require('!!raw-loader!./work.txt');\n    const mdText = toHTML(workText);\n\n    const [flipped, setFlipped] = useState(false);\n    const [show, setShow] = useState(false);\n    const [preview, setPreview] = useState(true);\n\n    useImperativeHandle(workRef, () => ({\n        write: async (index: number) => {\n            setShow(true);\n            await writeTo(el2Ref.current, workText, 0, speed, 1);\n        },\n        showWorkBox: () => {\n            setShow(true);\n            setPreview(false);\n            setFlipped(true);\n            setTimeout(() => {\n\n                el2Ref.current.scrollTop = 9999;\n\n                let flipping = false;\n                // @ts-ignore\n                wheel(el2Ref.current, async function (dx,dy) {\n                    if (flipping) return;\n                    let half = (el2Ref.current.scrollHeight - el2Ref.current.clientHeight) / 2;\n                    let pastHalf = flipped ? el2Ref.current.scrollTop < half : el2Ref.current.scrollTop > half;\n\n                    if (pastHalf) {\n                        setFlipped(!flipped);\n                        flipping = true;\n                        await Promise.delay(500);\n                        el2Ref.current.scrollTop = flipped ? 9999 : 0;\n                        flipping = false;\n                    }\n\n                    (el2Ref as any).scrollTop += (dy * (flipped ? -1 : 1));\n                }, true);\n            }, 200);\n        }\n    }));\n    return <>\n        {show ?\n            <pre id='work-text' ref={el2Ref} className={flipped ? 'flipped' : ''}>\n                {preview ?\n                    <div dangerouslySetInnerHTML={{__html: text}} />\n                    :\n                    <div>\n                        <div className=\"text\" dangerouslySetInnerHTML={{__html: workText}}/>\n                        <div className=\"md\" dangerouslySetInnerHTML={{__html: mdText}}/>\n                    </div>\n                }\n            </pre>\n            : null}\n    </>;\n\n};\n\nexport default WorkStyle;\n","import React, {useRef, useEffect} from 'react';\nimport Promise from 'bluebird';\nimport './App.css';\nimport StyleText from \"./components/style-text/style-text\";\nimport WorkStyle from \"./components/work-text/work-style\";\n\nconst App: React.FC = () => {\n    const styleRef: React.MutableRefObject<any> = useRef();\n    const workRef: React.MutableRefObject<any> = useRef();\n    let styleTagEl = document.getElementById('style-tag') as HTMLElement;\n    const startAnimation = async () => {\n        try {\n            await styleRef.current.write(0);\n            await workRef.current.write();\n            await styleRef.current.write(1);\n            workRef.current.showWorkBox();\n            await Promise.delay(2000);\n            await styleRef.current.write(2);\n        } catch (e) {\n            if (e.message === 'SKIP IT') {\n                surprisinglyShortAttentionSpan();\n            } else {\n                throw e;\n            }\n        }\n    };\n    const surprisinglyShortAttentionSpan = () => {\n        styleRef.current.writeToEnd();\n        // this.$refs.workText.showWorkBox()\n    };\n    const styleAppend = (styleText: any) => {\n        styleTagEl.textContent += styleText;\n    };\n    const styleOverwrite = (styleText: any) => {\n        styleTagEl.textContent = styleText;\n    };\n    useEffect(() => {\n        startAnimation().then();\n        // eslint-disable-next-line\n    }, []);\n    return (\n        <div id=\"App\">\n            <StyleText\n                animationSkipped={false}\n                paused={false}\n                styleOverwrite={styleOverwrite}\n                styleAppend={styleAppend}\n                innerRef={styleRef}/>\n            <WorkStyle\n                paused={false}\n                workRef={workRef}\n            />\n\n        </div>\n    );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <App/>,\n    document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}